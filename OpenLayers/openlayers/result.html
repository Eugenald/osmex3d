<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>GPS track Editor v.1.0</title>
    <script src="OpenLayers.js"></script>
    <script type="text/javascript">
      var map;
      var mapnik;
      var fromProjection;
      var toProjection;
      var markers;
      var x,s_x, t_x, y,i;
      var lon=[];
      var lat=[];
      function init() {
        x=0;y=0;i=0;
        map = new OpenLayers.Map({
          div: "basicMap",
          allOverlays: true
        });
        mapnik         = new OpenLayers.Layer.OSM();
        fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
        toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
        var position       = new OpenLayers.LonLat(30.6977847,46.4409529).transform( fromProjection, toProjection);
        var zoom           = 15;

        map.addLayer(mapnik);
        map.setCenter(position, zoom );
        map.addControl(new OpenLayers.Control.LayerSwitcher());

        markers = new OpenLayers.Layer.Markers( "Markers" );
        map.addLayer(markers);

        var size = new OpenLayers.Size(20,20);
        var offset = new OpenLayers.Pixel(-(size.w/2), -(size.h/2));
        var icon = new OpenLayers.Icon('http://i062.radikal.ru/1209/58/9d99454e85d0.png',size,offset);
		var icon_start = new OpenLayers.Icon('http://s09.radikal.ru/i182/1212/ad/590aa0e89cae.png',size,offset);
		var icon_second = new OpenLayers.Icon('http://s45.radikal.ru/i108/1212/0d/b2cbfeb346ac.png',size,offset);
		x=[46.4407651, 30.6977953,
46.4407643, 30.6978812,
46.4407693, 30.6979536,
46.4406531, 30.6979601,
46.440641, 30.6975079,
46.4407326, 30.6975027,
46.4407368, 30.6976578,
46.4410066, 30.6976426,
46.441, 30.6973978,
46.4410577, 30.6973946,
46.4410723, 30.6979422,
46.4409573, 30.6979487,
46.4410121, 30.7012795,
46.4409833, 30.7000459,
46.4392473, 30.6985686,
46.4391899, 30.6983925,
46.4392969, 30.6983191,
46.4393542, 30.6984952,
46.4394435, 30.698434,
46.439306, 30.6980121,
46.4394057, 30.6979437,
46.4394507, 30.6980818,
46.4395397, 30.6980208,
46.4394217, 30.6976586,
46.4393327, 30.6977196,
46.4393881, 30.6978895,
46.4392884, 30.6979579,
46.439233, 30.697788,
46.4391438, 30.6978492,
46.4392792, 30.6982649,
46.4391722, 30.6983382,
46.4391295, 30.6982071,
46.4399368, 30.6955729,
46.4400542, 30.6955364,
46.4391727, 30.7011849,
46.4397748, 30.7017924,
46.4406941, 30.6953733,
46.4408421, 30.6969748,
46.4410843, 30.6985398,
46.4412322, 30.6985358,
46.4419706, 30.695295,
46.4420246, 30.6968893,
46.4387692, 30.7015228,
46.4390069, 30.7017345,
46.4413741, 30.6978559,
46.4420398, 30.6978041,
46.4421604, 30.7015191,
46.4414454, 30.7007607,
46.4391727, 30.7011849,
46.4384258, 30.7004716,
46.4389379, 30.6995013,
46.4390377, 30.6993887,
46.4412892, 30.6968741,
46.4414117, 30.6968593,
46.4381135, 30.6976828,
46.4381893, 30.6978384,
46.4413488, 30.7016625,
46.442063, 30.702408,
46.4414643, 30.6972356,
46.4420338, 30.6972011,
46.439884, 30.7027366,
46.4392073, 30.70211,
46.4406866, 30.6998838,
46.4408124, 30.6998531,
46.439309, 30.7006517,
46.4387553, 30.6998751,
46.440279, 30.6986791,
46.4400614, 30.6971674,
46.4421352, 30.700792,
46.4416138, 30.7002324,
46.4414163, 30.6986331,
46.4420628, 30.6985981,
46.4399304, 30.7009881,
46.4398457, 30.7007033,
46.4401135, 30.7005357,
46.4402133, 30.7008714,
46.440371, 30.7007727,
46.4400679, 30.6997531,
46.4399415, 30.6998322,
46.4400715, 30.7002698,
46.439794, 30.7004435,
46.4396831, 30.7000703,
46.4421028, 30.7000704,
46.4415716, 30.6995211,
46.4390705, 30.696932,
46.4398603, 30.6966185,
46.441727, 30.6993824,
46.4421293, 30.6993299];
s_x = [46.4409529, 30.6977847 ,
46.4411128, 30.7000395,
46.4390378, 30.69827,
46.4402649, 30.6969651,
46.4397012, 30.7019461,
46.4407337, 30.696996,
46.4412479, 30.6997642,
46.4419026, 30.6968978,
46.4389532, 30.7018615,
46.4420485, 30.6980397,
46.4413655, 30.7009193,
46.4383581, 30.7006202,
46.4383871, 30.698061,
46.4413221, 30.6952938,
46.4388899, 30.6971695,
46.4421461, 30.7022402,
46.4420396, 30.6974048,
46.4392708, 30.7019656,
46.4406709, 30.6986303,
46.4386512, 30.7000315,
46.439935, 30.6972057,
46.4415374, 30.7003821,
46.4420574, 30.6983886,
46.4395115, 30.7001777,
46.4414919, 30.6996835,
46.4398918, 30.6967855,
46.4421027, 30.6989008];
t_x = [46.4408752, 30.6977954 ,
46.4411416, 30.7012731,
46.4391556, 30.6986315,
46.4401475, 30.6970016,
46.4390991, 30.7013386,
46.4405857, 30.6953944,
46.4411, 30.6997681,
46.441854, 30.6952979,
46.4387154, 30.7016498,
46.4413828, 30.6980915,
46.4420805, 30.7016777,
46.4390991, 30.7013386,
46.4382817, 30.6981683,
46.4411996, 30.6953086,
46.438827, 30.697023,
46.441432, 30.7014948,
46.4414702, 30.6974392,
46.4399475, 30.7025922,
46.4405451, 30.698661,
46.4392049, 30.700808,
46.4401526, 30.6987174,
46.4420588, 30.7009418,
46.4414109, 30.6984237,
46.4397804, 30.701082,
46.4420231, 30.7002328,
46.4391019, 30.697099,
46.4417004, 30.6989533];

	for ( i = 0; i < 500; i+=2){
		marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(s_x[i+1], s_x[i]).transform( fromProjection, toProjection),icon_start.clone());
		markers.addMarker(marker_tmp);
	}
	for ( i = 0; i < 500; i+=2){
		marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(t_x[i+1], t_x[i]).transform( fromProjection, toProjection),icon_second.clone());
		markers.addMarker(marker_tmp);
	}
	for ( i = 0; i < 500; i+=2){
		marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(x[i+1], x[i]).transform( fromProjection, toProjection),icon.clone());
		markers.addMarker(marker_tmp);
	}
      map.events.register("click", map , function(e){
        marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(map.getLonLatFromPixel(e.xy).lon, map.getLonLatFromPixel(e.xy).lat),icon.clone());
        markers.addMarker(marker_tmp);
        var lonlat = new OpenLayers.LonLat(map.getLonLatFromPixel(e.xy).lon, map.getLonLatFromPixel(e.xy).lat).transform( toProjection, fromProjection);
        lon[i] = lonlat.lon;
        lat[i] = lonlat.lat;
        i++;
      });

      }

  </script>
  </head>
  <body onLoad="init();">
      <div id="basicMap"></div>
  </body>
</html>