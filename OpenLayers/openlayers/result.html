<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>GPS track Editor v.1.0</title>
    <script src="OpenLayers.js"></script>
    <script type="text/javascript">
      var map;
      var mapnik;
      var fromProjection;
      var toProjection;
      var markers;
      var x,s_x, t_x, y,i;
      var lon=[];
      var lat=[];
      function init() {
        x=0;y=0;i=0;
        map = new OpenLayers.Map({
          div: "basicMap",
          allOverlays: true
        });
        mapnik         = new OpenLayers.Layer.OSM();
        fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
        toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
        var position       = new OpenLayers.LonLat(30.6977847,46.4409529).transform( fromProjection, toProjection);
        var zoom           = 10;

        map.addLayer(mapnik);
        map.setCenter(position, zoom );
        map.addControl(new OpenLayers.Control.LayerSwitcher());

        markers = new OpenLayers.Layer.Markers( "Markers" );
        map.addLayer(markers);

        var size = new OpenLayers.Size(20,20);
        var offset = new OpenLayers.Pixel(-(size.w/2), -(size.h/2));
        var icon = new OpenLayers.Icon('http://i062.radikal.ru/1209/58/9d99454e85d0.png',size,offset);
		var icon_start = new OpenLayers.Icon('http://s09.radikal.ru/i182/1212/ad/590aa0e89cae.png',size,offset);
		var icon_second = new OpenLayers.Icon('http://s45.radikal.ru/i108/1212/0d/b2cbfeb346ac.png',size,offset);
		x=[];
		s_x = [48.3611523, 10.8667737 ,
		48.3613124, 10.86686585,
		48.36158905, 10.86780985,
		48.36219965, 10.8668438,
		48.36194795, 10.86647485,
		48.3606206, 10.86624435,
		48.36254505, 10.86608545,
		48.3612608, 10.86592445,
		48.361138, 10.8675834,
		48.36149975, 10.8656292,
		48.3606076, 10.8664554,
		48.36116625, 10.86553665,
		48.3609879, 10.86669145,
		48.36187865, 10.8649668,
		48.3623291, 10.86605395,
		48.3612607, 10.8664807,
		48.3616897, 10.86685745,
		48.3615622, 10.8675339,
		48.36147595, 10.86520425,
		48.3610283, 10.86646475,
		48.3621873, 10.867411,
		48.36121505, 10.865194,
		48.36061755, 10.86563035,
		48.36094115, 10.8674533,
		48.3614613, 10.8645937,
		48.36047395, 10.8648568,
		48.36168985, 10.865949,
		48.3626119, 10.8663482,
		48.36187485, 10.86524565,
		48.3615348, 10.8663415,
		48.36090505, 10.8658023,
		48.36087485, 10.8661804,
		48.36063095, 10.8660407,
		48.36039245, 10.86629515,
		48.3619381, 10.8673417,
		48.36251545, 10.8676666,
		48.3605568, 10.86706925,
		48.36057755, 10.8652912,
		48.3605347, 10.8650865,
		48.361717, 10.8651878,
		48.3615663, 10.8668632,
		48.36193085, 10.866882,
		48.36094345, 10.8655087,
		48.3622035, 10.86683215,
		48.36135375, 10.86762175,
		48.36076395, 10.86510735,
		48.36151615, 10.8673465,
		48.36070695, 10.86490475,
		48.3610495, 10.867088,
		48.36120775, 10.86475875,
		48.3612547, 10.86729225,
		48.3614667, 10.8648734,
		48.3615826, 10.8645919,
		48.3617031, 10.8648767,
		48.36187855, 10.8646704,
		48.3605211, 10.8663899,
		48.3604077, 10.86466065];
		t_x = [];
	for ( i = 0; i < 1500; i+=2){
		marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(s_x[i+1], s_x[i]).transform( fromProjection, toProjection),icon_start.clone());
		markers.addMarker(marker_tmp);
	}
	for ( i = 0; i < 0; i+=2){
		marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(t_x[i+1], t_x[i]).transform( fromProjection, toProjection),icon_second.clone());
		markers.addMarker(marker_tmp);
	}
	for ( i = 0; i < 0; i+=2){
		marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(x[i+1], x[i]).transform( fromProjection, toProjection),icon.clone());
		markers.addMarker(marker_tmp);
	}
      map.events.register("click", map , function(e){
        marker_tmp = new OpenLayers.Marker(new OpenLayers.LonLat(map.getLonLatFromPixel(e.xy).lon, map.getLonLatFromPixel(e.xy).lat),icon.clone());
        markers.addMarker(marker_tmp);
        var lonlat = new OpenLayers.LonLat(map.getLonLatFromPixel(e.xy).lon, map.getLonLatFromPixel(e.xy).lat).transform( toProjection, fromProjection);
        lon[i] = lonlat.lon;
        lat[i] = lonlat.lat;
        i++;
      });

      }

  </script>
  </head>
  <body onLoad="init();">
      <div id="basicMap"></div>
  </body>
</html>